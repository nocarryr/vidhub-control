#:include vidhubcontrol/kivyui/vidhubview.kv
#:include vidhubcontrol/kivyui/vidhubedit.kv
#:include vidhubcontrol/kivyui/utils.kv

RootWidget:
    header_widget: header_widget
    main_widget: main_widget
    vidhub_widget: vidhub_widget
    vidhub_edit_widget: vidhub_edit_widget
    footer_widget: footer_widget
    BoxLayout:
        orientation: 'vertical'
        HeaderWidget:
            id: header_widget
            size_hint_y: .1
        TabbedPanel:
            id: main_widget
            size_hint_y: .8
            do_default_tab: False
            TabbedPanelItem:
                text:'Control'
                VidhubWidget:
                    id: vidhub_widget
                    size_hint: 1, 1
            TabbedPanelItem:
                text:'Edit'
                VidhubEditView:
                    id: vidhub_edit_widget
                    size_hint: 1, 1
        FooterWidget:
            id: footer_widget
            size_hint_y: .1
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: .4
                    OutlinedLabel:
                        text: 'Active Device'
                    BoxLayout:
                        orientation: 'horizontal'
                        OutlinedLabel:
                            text: vidhub_widget.name
                            size_hint_x: .6
                        OutlinedBoxLayout:
                            orientation: 'horizontal'
                            size_hint_x: .4
                            canvas:
                                Color:
                                    rgba: [.5,.5,.5,1]
                                Line:
                                    rectangle: (self.x, self.y, self.width, self.height)
                            Label:
                                text: 'Status:'
                            StatusIndicator:
                                state: vidhub_widget.connected
                BoxLayout:
                    size_hint_x: .75


<HeaderWidget>:
    orientation: 'horizontal'
    Button:
        text: 'Select Device'
        on_release: root.vidhub_dropdown.open(self)
    Button:
        text: 'Settings'
        on_release: app.open_settings()

<FooterWidget@BoxLayout>:
    orientation: 'horizontal'

<DeviceDropdown>:
    app: app

<DeviceDropdownButton>:
    app: app
    size_hint_y: None
    height: 44
